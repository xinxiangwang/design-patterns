<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>代理模式</title>
</head>
<body>
  <iframe
  src="http://bi.aikayu.com/embed/dashboard/eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJwYXJhbXMiOnt9LCJyZXNvdXJjZSI6eyJkYXNoYm9hcmQiOjJ9LCJleHAiOjE1OTc5MjA4NjIuMH0.JQJ-glnl6cwpd1pb9IdTma0ZJn1APtwihD4aELZ-UiY#bordered&titled"
  frameborder="0"
  width="800"
  height="600"
  allowtransparency
></iframe>
<script>
  // 最简单版
  // let Flower = function () {}

  // let daxiong = {
  //   sendFlower (target) {
  //     let flower = new Flower()
  //     target.receiveFlower(flower)
  //   }
  // }

  // let jingxiang = {
  //   receiveFlower (flower) {
  //     console.log('收到花' + flower)
  //   }
  // }

  // let flowerAgent = {
  //   receiveFlower (flower) {
  //     console.log('我是flowerAgent')
  //     jingxiang.receiveFlower(flower)
  //   }
  // }
  // daxiong.sendFlower(flowerAgent)

  // 进阶版

  let Flower = function () {}
  let daxiong = {
    sendFlower (target) {
      let flower = new Flower()
      target.receiverFlower(flower)
    }
  }
  let flowerAgent = {
    receiverFlower (flower) {
      jingxiang.listenGoodMood(() => {
        jingxiang.receiverFlower(flower)
      })
    }
  }
  let jingxiang = {
    receiverFlower (flower) {
      console.log('收到花' + flower)
    },
    listenGoodMood (fn) {
      setTimeout(() => {
        fn()
      }, 1000)
    }
  }
  daxiong.sendFlower(flowerAgent)
</script>
</body>
</html>